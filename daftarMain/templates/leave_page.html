<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Leave</title>
</head>
<body>
    <h1>Request Leave</h1>

    <!-- Form for requesting leave -->
    <form method="POST">
        {% csrf_token %}

        <!-- Hourly leave section -->
        <h2>Hourly Leave</h2>
        <label for="hourly_start_time">Start Time:</label>
        <input type="datetime-local" id="hourly_start_time" name="hourly_start_time"><br>

        <label for="hourly_end_time">End Time:</label>
        <input type="datetime-local" id="hourly_end_time" name="hourly_end_time"><br>

        <hr>

        <!-- Daily leave section -->
        <h2>Daily Leave</h2>
        <label for="start_date">Start Date:</label>
        <input type="date" id="start_date" name="start_date"><br>

        <label for="end_date">End Date:</label>
        <input type="date" id="end_date" name="end_date"><br>

        <label for="leave_reason">Reason:</label>
        <textarea id="leave_reason" name="leave_reason"></textarea><br>

        <button type="submit">Submit Leave Request</button>
    </form>

    <hr>

    <!-- Display existing leave requests -->
    <h2>Your Leave Requests</h2>
    <table>
        <thead>
            <tr>
                <th>Type</th>
                <th>Start Date/Time</th>
                <th>End Date/Time</th>
                <th>Reason</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for leave in leave_requests %}
            <tr>
                <td>{{ leave.get_leave_type_display }}</td>
                <td>
                    {% if leave.start_date %}
                        {{ leave.start_date }}
                    {% else %}
                        {{ leave.start_time }}
                    {% endif %}
                </td>
                <td>
                    {% if leave.end_date %}
                        {{ leave.end_date }}
                    {% else %}
                        {{ leave.end_time }}
                    {% endif %}
                </td>
                <td>{{ leave.reason }}</td>
                <td>
                    {% if leave.approved is True %}
                        <span style="color: green;">Approved</span>
                    {% elif leave.approved is False %}
                        <span style="color: red;">Denied</span>
                    {% else %}
                        <span style="color: orange;">Pending</span>
                    {% endif %}
                </td>
                
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="{% url 'office_user_page' %}">Back to Office User Page</a>
</body>
</html>
